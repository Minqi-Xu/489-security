#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <fcntl.h>
#include <unistd.h>
#include <sys/uio.h>

int main(){
	
	FILE *F;
	char ch;
	char str[25] = "";
	pid_t pid = getpid();
        pid_t ppid = getppid();

	F = fopen("/home/seed/flag", "r");
	
	struct iovec iov[1];

	if(F==NULL) {
		//printf("fopen fail\n");
		return 1;
	}

	ch = fgetc(F);

	while(ch!=EOF){
		strncat(str, &ch, 1);
		//printf("%c",ch);
		//putc(ch,stdout);
		ch = fgetc(F);
	}

	iov[0].iov_base = str;
	iov[0].iov_len = strlen(str);

	// writev(1, iov, 1);
	
	//dprintf(1, "%s", str);
	//pwrite(1, str, 21, 0);
	

	//process_vm_writev(pid, iov, 2, iov, 2, 0);

	//system("less -FX /home/seed/flag");
	
	char *args[4];
	args[0] = "sh";
	args[1] = "-c";
	args[2] = "cat";
	args[3] = "/home/seed/flag";
	
	execl("/usr/bin/sh", "sh", "-c", "cat /home/seed/flag", NULL);
	//execv("/usr/bin/sh", args);
	
	fclose(F);
	return 0;
}
